When we decided to convert our code from d3 v3 to d3 v4 we soon understood it was little retro compatible and there was a lot to change. Therefore, we opted in starting over directly from examples of d3 v4 and change them until they could be finally integrated in our code (changing just some names, according to https://github.com/d3/d3/blob/master/CHANGES.md, of our d3 v3 code did not revealed to be effective). Eventually, we managed to convert all our code and we could continue with the design of our site.
